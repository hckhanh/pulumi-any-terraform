---
title: Namecheap Provider
description: Manage Namecheap domains and DNS records with Pulumi
---

The Namecheap provider enables you to manage domain names and DNS records on Namecheap using Pulumi. This provider is dynamically bridged from the [Terraform Namecheap Provider](https://registry.terraform.io/providers/namecheap/namecheap).

## Installation

```bash
npm install pulumi-namecheap
```

## Configuration

The Namecheap provider requires API credentials from your Namecheap account.

### Getting API Credentials

1. Log in to your Namecheap account
2. Navigate to Profile → Tools → API Access
3. Enable API access and whitelist your IP address
4. Note your API key, username, and API user

### Provider Configuration

Configure the provider using Pulumi config:

```bash
pulumi config set namecheap:apiUser YOUR_API_USER
pulumi config set namecheap:apiKey YOUR_API_KEY --secret
pulumi config set namecheap:userName YOUR_USERNAME
pulumi config set namecheap:useSandbox false
```

Or using environment variables:

```bash
export NAMECHEAP_API_USER="your-api-user"
export NAMECHEAP_API_KEY="your-api-key"
export NAMECHEAP_USER_NAME="your-username"
export NAMECHEAP_USE_SANDBOX="false"
```

### Configuration Options

| Option | Required | Description |
|--------|----------|-------------|
| `apiUser` | Yes | Namecheap API user |
| `apiKey` | Yes | Namecheap API key |
| `userName` | Yes | Namecheap username |
| `useSandbox` | No | Use sandbox environment (default: false) |
| `endpoint` | No | Custom API endpoint |

## Usage Examples

### Creating DNS Records

```typescript
import * as pulumi from "@pulumi/pulumi";
import * as namecheap from "pulumi-namecheap";

// Create an A record
const wwwRecord = new namecheap.Record("www-record", {
    domain: "example.com",
    hostname: "www",
    type: "A",
    address: "192.168.1.1",
    ttl: 300,
});

// Create a CNAME record
const apiRecord = new namecheap.Record("api-record", {
    domain: "example.com",
    hostname: "api",
    type: "CNAME",
    address: "api-server.example.com.",
    ttl: 1800,
});

// Create an MX record
const mxRecord = new namecheap.Record("mx-record", {
    domain: "example.com",
    hostname: "@",
    type: "MX",
    address: "mail.example.com.",
    mxPref: 10,
    ttl: 3600,
});

// Export record IDs
export const wwwRecordId = wwwRecord.id;
export const apiRecordId = apiRecord.id;
```

### Managing Multiple Records

```typescript
import * as pulumi from "@pulumi/pulumi";
import * as namecheap from "pulumi-namecheap";

const domain = "example.com";

// Create multiple A records
const records = [
    { name: "www", ip: "192.168.1.1" },
    { name: "blog", ip: "192.168.1.2" },
    { name: "shop", ip: "192.168.1.3" },
];

const dnsRecords = records.map(record => 
    new namecheap.Record(`${record.name}-record`, {
        domain: domain,
        hostname: record.name,
        type: "A",
        address: record.ip,
        ttl: 300,
    })
);

// Export all record IDs
export const recordIds = dnsRecords.map(r => r.id);
```

### TXT Records for Verification

```typescript
import * as pulumi from "@pulumi/pulumi";
import * as namecheap from "pulumi-namecheap";

// Domain verification TXT record
const verificationRecord = new namecheap.Record("domain-verification", {
    domain: "example.com",
    hostname: "@",
    type: "TXT",
    address: "google-site-verification=abc123xyz",
    ttl: 300,
});

// SPF record
const spfRecord = new namecheap.Record("spf-record", {
    domain: "example.com",
    hostname: "@",
    type: "TXT",
    address: "v=spf1 include:_spf.example.com ~all",
    ttl: 3600,
});

// DKIM record
const dkimRecord = new namecheap.Record("dkim-record", {
    domain: "example.com",
    hostname: "default._domainkey",
    type: "TXT",
    address: "k=rsa; p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKB...",
    ttl: 3600,
});
```

### Complete Email Setup

```typescript
import * as pulumi from "@pulumi/pulumi";
import * as namecheap from "pulumi-namecheap";

const domain = "example.com";

// MX records for email
const mx1 = new namecheap.Record("mx-primary", {
    domain: domain,
    hostname: "@",
    type: "MX",
    address: "mail1.example.com.",
    mxPref: 10,
    ttl: 3600,
});

const mx2 = new namecheap.Record("mx-backup", {
    domain: domain,
    hostname: "@",
    type: "MX",
    address: "mail2.example.com.",
    mxPref: 20,
    ttl: 3600,
});

// Mail server A records
const mailServer1 = new namecheap.Record("mail1", {
    domain: domain,
    hostname: "mail1",
    type: "A",
    address: "192.168.1.10",
    ttl: 300,
});

const mailServer2 = new namecheap.Record("mail2", {
    domain: domain,
    hostname: "mail2",
    type: "A",
    address: "192.168.1.11",
    ttl: 300,
});

// SPF record
const spf = new namecheap.Record("spf", {
    domain: domain,
    hostname: "@",
    type: "TXT",
    address: "v=spf1 mx -all",
    ttl: 3600,
});

export const emailSetupComplete = pulumi.all([
    mx1.id,
    mx2.id,
    mailServer1.id,
    mailServer2.id,
    spf.id
]).apply(() => true);
```

## Record Types

The Namecheap provider supports the following DNS record types:

| Type | Description | Example |
|------|-------------|---------|
| `A` | IPv4 address | `192.168.1.1` |
| `AAAA` | IPv6 address | `2001:0db8::1` |
| `CNAME` | Canonical name | `server.example.com.` |
| `MX` | Mail exchange | `mail.example.com.` |
| `TXT` | Text record | `v=spf1 include:_spf.google.com ~all` |
| `NS` | Name server | `ns1.example.com.` |
| `SRV` | Service record | `10 5 5060 sipserver.example.com.` |

## Best Practices

### 1. Use Appropriate TTL Values

```typescript
// Short TTL for frequently changing records
const dynamicRecord = new namecheap.Record("dynamic", {
    domain: "example.com",
    hostname: "app",
    type: "A",
    address: loadBalancerIp,
    ttl: 60, // 1 minute
});

// Long TTL for stable records
const staticRecord = new namecheap.Record("static", {
    domain: "example.com",
    hostname: "cdn",
    type: "CNAME",
    address: "cdn.cloudflare.net.",
    ttl: 86400, // 24 hours
});
```

### 2. Organize Records by Function

```typescript
// Group related records
const webRecords = {
    www: new namecheap.Record("www", { /* ... */ }),
    api: new namecheap.Record("api", { /* ... */ }),
    cdn: new namecheap.Record("cdn", { /* ... */ }),
};

const emailRecords = {
    mx: new namecheap.Record("mx", { /* ... */ }),
    spf: new namecheap.Record("spf", { /* ... */ }),
    dkim: new namecheap.Record("dkim", { /* ... */ }),
};
```

### 3. Use Stack Outputs for Cross-Stack References

```typescript
import * as pulumi from "@pulumi/pulumi";

// Reference infrastructure stack
const infraStack = new pulumi.StackReference("my-org/infra/production");
const apiServerIp = infraStack.getOutput("apiServerIp");

// Create DNS record pointing to infrastructure
const apiRecord = new namecheap.Record("api", {
    domain: "example.com",
    hostname: "api",
    type: "A",
    address: apiServerIp,
    ttl: 300,
});
```

## Troubleshooting

### Common Issues

#### API Access Denied
```
Error: API access denied
```

**Solution**: Ensure your IP address is whitelisted in Namecheap's API settings.

#### Invalid Hostname
```
Error: Invalid hostname format
```

**Solution**: Hostnames should not include the domain. Use `www` instead of `www.example.com`.

#### Trailing Dot Required
```
Error: CNAME target must end with a dot
```

**Solution**: Add a trailing dot to CNAME and MX targets: `server.example.com.`

### Debug Mode

Enable debug logging:

```bash
export PULUMI_DEBUG_COMMANDS=true
pulumi up -v=9
```

## Resource Reference

### Record

#### Arguments

- `domain` (Required): The domain name
- `hostname` (Required): The hostname (without domain)
- `type` (Required): Record type (A, AAAA, CNAME, MX, TXT, NS, SRV)
- `address` (Required): Record value/target
- `ttl` (Optional): Time to live in seconds (default: 1800)
- `mxPref` (Optional): MX preference (required for MX records)

#### Attributes

- `id`: Unique identifier for the record
- `name`: Full DNS name

## Migration from Terraform

If you're migrating from Terraform:

```hcl
# Terraform
resource "namecheap_record" "www" {
  domain   = "example.com"
  hostname = "www"
  type     = "A"
  address  = "192.168.1.1"
  ttl      = 300
}
```

```typescript
// Pulumi
const wwwRecord = new namecheap.Record("www", {
    domain: "example.com",
    hostname: "www",
    type: "A",
    address: "192.168.1.1",
    ttl: 300,
});
```
